---
import Navigation from "../components/Navigation/Navigation.astro";
import "../styles/components.scss";
import "../styles/global.scss";
import { CLASS_COLORS, SPEC_OPTIONS } from "../lib/wow-constants.ts";
import { buildSimSpecOptions } from "../lib/sim-specs.ts";
import {
  formatDuration,
  formatRaidBuffs,
  formatSimulationDate,
  formatRace,
  toTitleCase,
  slugifyLabel,
} from "../lib/utils.ts";

import ItemDatabase from "../components/ItemDatabase.astro";

export interface Props {
  title?: string;
  description?: string;
}

const { title = "Simulations", description = "Benchmarks and comparisons" } =
  Astro.props;
const SPEC_OPTIONS_SIM = buildSimSpecOptions(SPEC_OPTIONS);
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <script src="../client/url-utils.ts"></script>
  </head>
  <body>
    <Navigation />
    <div class="page-header">
      <h1 class="page-title">{title}</h1>
      {description && <p class="page-description">{description}</p>}
    </div>
    <script
      type="module"
      is:inline
      define:vars={{
        CLASS_COLORS,
        SPEC_OPTIONS: SPEC_OPTIONS_SIM,
        formatDuration,
        formatRaidBuffs,
        formatSimulationDate,
        formatRace,
        toTitleCase,
        slugifyLabel,
      }}
    >
      window.WoWConstants = {
        CLASS_COLORS,
        SPEC_OPTIONS,
        formatDuration,
        formatRaidBuffs,
        formatSimulationDate,
        formatRace,
        toTitleCase,
        slugifyLabel,
      };
    </script>
    <ItemDatabase />
    <div class="page-container rankings-container">
      <slot />
    </div>
  </body>
</html>
