---
import type { BestRun } from "../lib/types";
import { renderBestRunsWithWrapper } from "../lib/bestRunsRenderer";
import "../styles/best-runs.scss";

export interface Props {
  bestRuns?: Record<string, BestRun>;
  mode?: "full" | "compact";
  showSectionWrapper?: boolean;
  class?: string;
  playerRegion?: string;
  playerRealmSlug?: string;
}

const {
  bestRuns,
  mode = "full",
  showSectionWrapper = false,
  class: className,
  playerRegion,
  playerRealmSlug,
} = Astro.props;

// Use the shared renderer to generate the HTML
const tableHTML = renderBestRunsWithWrapper(
  bestRuns || {},
  {
    mode,
    showSectionWrapper,
    className,
  },
  playerRegion,
  playerRealmSlug,
);
---

<div set:html={tableHTML} />

<script src="../client/best-runs-decorate.ts"></script>
